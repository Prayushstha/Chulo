<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- style -->
    <link rel="stylesheet" href="assets/CSS/homepage.css" />
    <link rel="stylesheet" href="assets/CSS/responsive.css" />
    <link rel="stylesheet" href="assets/CSS/navbar.css" />
    <link rel="stylesheet" href="assets/CSS/cart.css" />
    <link rel="stylesheet" href="assets/CSS/theme.css" />
    <link rel="stylesheet" href="assets/CSS/footer.css" />

    <!-- slider -->
    <link rel="stylesheet" href="assets/CSS/slider.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/swiper@8/swiper-bundle.min.css"
    />
    <!-- descriptions -->
    <link rel="stylesheet" href="assets/CSS/food-description.css" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="icon" type="image/x-icon" href="assets/images/logo/logo.png" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script
      src="https://kit.fontawesome.com/a076d05399.js"
      crossorigin="anonymous"
    ></script>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Supermercado+One&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Supermercado+One&display=swap"
      rel="stylesheet"
    />
    <title>Homepage</title>
    <script src="assets/Backend/ui-enhancer.js"></script>
    <script>
      // Smooth Scrolling JS
      console.log("Smooth scroll initializing...");
      function smoothScrollWithOffset(target) {
        const element = document.querySelector(target);
        if (!element) {
          console.log("Element not found:", target);
          return;
        }
        const navbar = document.querySelector(".navbar");
        const categoriesBar = document.querySelector(".name");
        const navbarHeight = navbar ? navbar.offsetHeight : 0;
        const categoriesHeight = categoriesBar ? categoriesBar.offsetHeight : 0;
        const totalOffset = navbarHeight + categoriesHeight + 30;
        const elementPosition =
          element.getBoundingClientRect().top + window.pageYOffset;
        const targetPosition = elementPosition - totalOffset;
        console.log("Scrolling to position:", targetPosition);
        window.scrollTo({
          top: targetPosition,
          behavior: "smooth",
        });
      }
      document.addEventListener("DOMContentLoaded", function () {
        const sidebarLinks = document.querySelectorAll(
          '.sidebar-list a[href^="#"]',
        );
        console.log("Found sidebar links:", sidebarLinks.length);
        sidebarLinks.forEach((link) => {
          link.addEventListener("click", function (e) {
            e.preventDefault();
            e.stopPropagation();
            const target = this.getAttribute("href");
            console.log("Clicked:", target);
            smoothScrollWithOffset(target);
          });
        });
      });

      // Search Bar Toggle JS
      function toggleSearchBar() {
        const container = document.getElementById("navSearchContainer");
        const input = document.getElementById("navSearchInput");

        container.classList.toggle("active");

        // Focus on input when opened
        if (container.classList.contains("active")) {
          setTimeout(() => input.focus(), 300);
        }
      }
    </script>
  </head>

  <body id="home-link">
    <!-- Navbar -->
    <div class="navbar" style="font-size: larger">
      <a href="homepage.html">
        <div class="logo-container">
          <img class="logo" src="assets/images/logo/logo.png" />
          <p class="logo-name">Chulo</p>
        </div>
      </a>
      <ul>
        <li class="navbar-list search-nav-item" id="search">
          <div class="search-container">
            <input
              type="text"
              name="text"
              class="input"
              id="navSearchInput"
              required=""
              placeholder="Type to search..."
            />
            <div class="icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="ionicon"
                viewBox="0 0 512 512"
              >
                <title>Search</title>
                <path
                  d="M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z"
                  fill="none"
                  stroke="currentColor"
                  stroke-miterlimit="10"
                  stroke-width="32"
                ></path>
                <path
                  fill="none"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-miterlimit="10"
                  stroke-width="32"
                  d="M338.29 338.29L448 448"
                ></path>
              </svg>
            </div>
          </div>
        </li>
        <li class="navbar-list" id="navhome">
          <a href="#home-link" id="navhome">Home</a>
        </li>
        <li class="navbar-list" id="navtrending">
          <a href="#Trending">Trending</a>
        </li>
        <li class="navbar-list" id="navabout">
          <a href="AboutUS.html">About Us</a>
        </li>

        <li class="navbar-list" id="navcart">
          <a href="#" id="cart-toggle-btn">
            <i class="fas fa-shopping-cart"></i>
            <span id="cart-badge" style="display: none">0</span>
          </a>
        </li>
        <li class="navbar-list" id="navprofile">
          <a href="signup.html"
            ><i class="fas fa-user-alt" style="scale: 1.4"></i
          ></a>
        </li>
      </ul>
    </div>
    <!-- Image slider -->
    <div class="slider">
      <div class="slider__item">
        <label class="slider__control">
          <input type="radio" name="slider" checked />
        </label>
        <div class="slider__content">
          <img src="assets/images/slider/1.jpg" alt="" />
        </div>
      </div>
      <div class="slider__item">
        <label class="slider__control">
          <input type="radio" name="slider" />
        </label>
        <div class="slider__content">
          <img src="assets/images/slider/2.jpg" alt="" />
        </div>
      </div>
      <div class="slider__item">
        <label class="slider__control">
          <input type="radio" name="slider" />
        </label>
        <div class="slider__content">
          <img src="assets/images/slider/3.jpg" alt="" />
        </div>
      </div>
      <div class="slider__item">
        <label class="slider__control">
          <input type="radio" name="slider" />
        </label>
        <div class="slider__content">
          <img src="assets/images/slider/4.jpg" alt="" />
        </div>
      </div>
    </div>
    <!-- Main Content -->
    <div class="name">
      <p id="categories">CATEGORIES</p>
    </div>
    <!-- Mobile view Search bar -->
    <div class="search">
      <form class="form" id="searchForm">
        <button id="searchButton">
          <svg
            width="17"
            height="16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            role="img"
            aria-labelledby="search"
          >
            <path
              d="M7.667 12.667A5.333 5.333 0 107.667 2a5.333 5.333 0 000 10.667zM14.334 14l-2.9-2.9"
              stroke="currentColor"
              stroke-width="1.333"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></path>
          </svg>
        </button>
        <input
          class="input"
          id="searchInput"
          placeholder="Type your text"
          required=""
          type="text"
        />
        <button class="reset" type="reset" id="resetButton">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M6 18L18 6M6 6l12 12"
            ></path>
          </svg>
        </button>
      </form>
    </div>

    <div class="food-preview-container">
      <div class="sidebar">
        <ul>
          <li class="sidebar-list">
            <a href="#Around-The-Globe">Around The Globe</a>
          </li>
          <li class="sidebar-list"><a href="#Trending">Trending</a></li>
          <li class="sidebar-list"><a href="#Dessert">Dessert</a></li>
          <li class="sidebar-list"><a href="#Healthy">Healthy Option</a></li>
          <li class="sidebar-list"><a href="#Desi">Desi food</a></li>
        </ul>
      </div>

      <div class="main-content">
        <!-- Around The Globe -->
        <div class="food-item-list" id="Around-The-Globe">
          <br />
          <div class="food-type-name">AROUND THE GLOBE</div>
        </div>
        <div class="food-1-preview"></div>

        <!-- Trending -->
        <div class="food-type-name" id="Trending">Trending</div>
        <div class="food-1-preview"></div>

        <!-- Dessert -->
        <div class="food-type-name" id="Dessert">DESSERT</div>
        <div class="food-1-preview"></div>

        <!-- Healthy -->
        <div class="food-type-name" id="Healthy">Healthy Option</div>
        <div class="food-1-preview"></div>

        <!-- Desi -->
        <div class="food-type-name" id="Desi">Desi Foods</div>
        <div class="food-1-preview"></div>
      </div>
    </div>
    <!-- Dialog -->
    <dialog
      id="dialog"
      style="
        max-width: 140vh;
        min-height: 70vh;
        margin: auto;
        border-radius: 24px;
        border: none;
      "
    >
      <button class="dialog-close-btn" onclick="closeDialog()">√ó</button>
      <div class="food-description-container" id="desc">
        <div class="food-picture-container" style="max-width: 600px">
          <img class="food-description-picture" src="" />
        </div>

        <div class="food-description" style="margin-left: 20px">
          <div class="food-name">Chicken Burger</div>

          <div class="food-price">
            <div class="original-price">&#x20B9; 190</div>
            <div class="discounted-price">&#x20B9; 140</div>
          </div>

          <button class="buy-button">Buy</button>

          <div class="description">
            <div class="description-heading">DETAILS ABOUT THIS MEAL</div>
            <div class="description-content"></div>

            <div class="veg-non-veg">
              <img
                class="food-sticker"
                src="assets/images/food-pictures/icn-non-veg.svg"
              />
              <div class="veg-non">Non-veg</div>
            </div>

            <div class="ingredients-heading">INGREDIENTS</div>
            <div class="ingredients-content"></div>
          </div>

          <div class="nutrients-heading">NUTRIENTS</div>
          <div class="nutrients-content">
            <div class="nutrients-value">
              <div class="nutrients-number">450</div>
              <div>Energy (kcl)</div>
            </div>
            <div class="nutrients-value">
              <div class="nutrients-number">20</div>
              <div>Fats (g)</div>
            </div>
            <div class="nutrients-value">
              <div class="nutrients-number">35</div>
              <div>Carbs (g)</div>
            </div>
            <div class="nutrients-value">
              <div class="nutrients-number">4</div>
              <div>Fiber (g)</div>
            </div>
            <div class="nutrients-value">
              <div class="nutrients-number">37</div>
              <div>Protein (g)</div>
            </div>
          </div>
        </div>
      </div>
    </dialog>
    <!-- Cart -->
    <aside class="cart-sidebar" id="cart-sidebar">
      <div class="cart-header">
        <h2><i class="fas fa-shopping-bag"></i> Your Cart</h2>
        <button class="clear-cart-btn" onclick="clearCart()">Clear</button>
        <button class="close-cart-btn" id="close-cart-btn">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="cart-items-container" id="cart-items-container">
        <!-- Cart Items will be injected here via JS -->
        <div class="empty-cart-message">
          <i class="fas fa-shopping-basket"></i>
          <p>Your cart is empty</p>
        </div>
      </div>

      <div class="cart-footer">
        <div class="billing-summary">
          <div class="billing-row">
            <span>Subtotal</span>
            <span id="cart-subtotal">Rs. 0</span>
          </div>
          <div class="billing-row">
            <span>VAT (13%)</span>
            <span id="cart-tax">Rs. 0</span>
          </div>
          <div class="billing-row total">
            <span>Total</span>
            <span id="cart-total">Rs. 0</span>
          </div>
        </div>
        <button class="checkout-btn" onclick="checkout()">
          Proceed to Checkout
        </button>
      </div>
    </aside>

    <!-- Footer-->
    <footer class="footer">
      <div class="footer-grid">
        <div class="footer-brand">
          <h2>Chulo</h2>
          <p>Bold flavors and fast bites served fresh every day.</p>
          <p>
            Founded in the heart of Bhaktapur in 2018, KhajaTime began with a
            simple mission: to bring the authentic taste of Nepali cuisine to
            food lovers across the valley.
          </p>
        </div>

        <div class="footer-links">
          <h4>Quick Links</h4>
          <a href="#home-link">Home</a>
          <a href="homepage.html#Trending">Trending</a>
          <a href="index.html#review-section-link">Reviews</a>
          <a href="AboutUS.html">About</a>
        </div>

        <div class="footer-contact">
          <h4>Contact</h4>
          <p>üìç Durbar Square Road, Bhaktapur 44800, Nepal</p>
          <p>üìû +977 1-6611234</p>
          <p>üìß khajatime.fastfood@gmail.com</p>

          <div class="social-icons">
            <a href="https://www.facebook.com/prayush.stha.56"
              ><img src="assets/images/others/facebook-logo.png" alt="Prayush"
            /></a>
            <a href="https://www.facebook.com/krishna.neupane.408127"
              ><img src="assets/images/others/facebook-logo.png" alt="Krishna"
            /></a>
            <a href="https://www.facebook.com/prashil.baidhya.2025"
              ><img src="assets/images/others/facebook-logo.png" alt="Prashil"
            /></a>
          </div>
        </div>
      </div>

      <div class="footer-bottom">
        <p>¬© 2026 Chulo Fast Food. All rights reserved.</p>
      </div>
    </footer>

    <!-- Scripts -->
    <script src="assets/Backend/cart.js"></script>
    <script src="assets/Backend/search.js"></script>
    <script src="assets/Backend/descriptions.js"></script>

    <script>
      // Food Categories Configuration
      const categories = {
        "Around-The-Globe": [1, 2, 3, 4, 5],
        Trending: [4, 2, 3, 1, 6],
        Dessert: [7, 8, 9, 10],
        Healthy: [11, 12, 13, 14, 15],
        Desi: [16, 17, 18],
      };

      // Helper function to generate star rating HTML
      function generateStarRating(rating) {
        const fullStars = Math.floor(rating);
        const emptyStars = 5 - fullStars;

        let stars = "";

        for (let i = 0; i < fullStars; i++) {
          stars += '<span class="fa fa-star checked"></span>';
        }

        for (let i = 0; i < emptyStars; i++) {
          stars += '<span class="fa fa-star"></span>';
        }

        return stars;
      }

      // Create HTML for a single food item
      function createFoodItemHTML(item, showRank = false, rank = null) {
        const starRating = generateStarRating(item.rating || 4.5);

        return `
      <div class="food-preview" data-id="${item.id}">
        <a onclick="showDialog(${item.id})">
          <div class="food-image-wrapper">
            <img class="food-picture" src="assets/images/food-pictures/${item.image}" alt="${item.name}">
          </div>
          <div class="food-description">
            <p class="food-name">${item.name}</p>
            <div class="food-rating">
              ${starRating}
            </div>
            <div class="food-item-description">
              ${item.shortDescription || "Delicious food item prepared with fresh ingredients"}
            </div>
            <div class="food-sub-description">
              <span class="food-price">&#x20B9; ${item.price}</span>
              <button class="buy-button" onclick="event.stopPropagation(); addToCart(${item.id})">Buy</button>
            </div>
          </div>
        </a>
      </div>
    `;
      }

      // Render a specific category
      function renderCategory(categoryId, itemIds, showRanks = false) {
        const container = document.getElementById(categoryId);

        if (!container) {
          console.error(`Container with id "${categoryId}" not found`);
          return;
        }

        let previewContainer = container.nextElementSibling;

        while (
          previewContainer &&
          !previewContainer.classList.contains("food-1-preview")
        ) {
          previewContainer = previewContainer.nextElementSibling;
        }

        if (!previewContainer) {
          console.error(
            `Preview container not found for category "${categoryId}"`,
          );
          return;
        }

        previewContainer.innerHTML = "";

        itemIds.forEach((itemId, index) => {
          const item = foodItems.find((food) => food.id === itemId);
          if (item) {
            const rank = showRanks ? index + 1 : null;
            previewContainer.innerHTML += createFoodItemHTML(
              item,
              showRanks,
              rank,
            );
          }
        });
      }

      // Render all categories
      function renderAllCategories() {
        console.log("Rendering all categories...");

        renderCategory("Around-The-Globe", categories["Around-The-Globe"]);
        renderCategory("Trending", categories["Trending"], true);
        renderCategory("Dessert", categories["Dessert"]);
        renderCategory("Healthy", categories["Healthy"]);
        renderCategory("Desi", categories["Desi"]);

        console.log("All categories rendered");

        if (typeof initializeSearchAfterRender === "function") {
          initializeSearchAfterRender();
        }
      }

      // Initialize everything when DOM is ready
      document.addEventListener("DOMContentLoaded", function () {
        console.log("DOM Content Loaded");
        renderAllCategories();
      });
    </script>
  <script src="assets/Backend/signup.js"></script>
  <script src="assets/Backend/cart.js"></script>
    <script src="assets/Backend/search.js"></script>
    <script src="assets/Backend/descriptions.js"></script>
    <script src="assets/Backend/navbar.js"></script>
  </body>
</html>
